/* ===========================
   DATA: DIY BODY CARE
   =========================== */
const DIY_BODYCARE = [
  {
    id: "facewash",
    title: "DIY Face Wash",
    short: "Natural daily powder cleanser for clean, glowing skin.",
    img: "images/diy-facewash.jpg",
    video: "1ERPURBrdrU",
    ingredients: [
      "2 tbsp Besan (Gram Flour)",
      "2 tbsp Rice Flour",
      "1 tbsp Beetroot Powder",
      "½ tsp Turmeric"
    ],
    steps: [
      "Mix besan, rice flour, beetroot powder, turmeric in a dry bowl.",
      "Store in airtight container.",
      "To use: take 1 tsp powder, add water/rose water/raw milk.",
      "Massage on face 1–2 min, rinse with lukewarm water."
    ],
    benefits: [
      "Deep cleanses & removes oil.",
      "Rice flour exfoliates & brightens.",
      "Beetroot adds glow.",
      "Turmeric fights bacteria."
    ]
  },
  {
    id: "ubtan",
    title: "DIY Ubtan",
    short: "Traditional skin brightening pack for face & body.",
    img: "images/diy-ubtan.jpg",
    video: "X0ASb0IEUy8",
    ingredients: [
      "2 tbsp Gram Flour (Besan)",
      "1 tsp Turmeric",
      "1 tbsp Yogurt",
      "1–2 tbsp Milk"
    ],
    steps: [
      "Mix besan & turmeric.",
      "Add yogurt & milk for thick paste.",
      "Apply on face/body. Leave 10–15 min.",
      "Scrub gently & rinse."
    ],
    benefits: [
      "Exfoliates dead skin.",
      "Reduces tan.",
      "Hydrates & nourishes.",
      "Improves glow."
    ]
  },
  {
    id: "soap",
    title: "DIY Turmeric Soap",
    short: "Melt & pour glycerin soap with turmeric for glow.",
    img: "images/diy-soap.jpg",
    video: "d0Jx-qKNnT4",
    ingredients: [
      "Melt & Pour Soap Base",
      "1 tsp Turmeric Powder",
      "Water",
      "Soap mould / box"
    ],
    steps: [
      "Melt soap base using double boiler.",
      "Add turmeric & mix.",
      "Pour in mould, let set.",
      "Unmould & use."
    ],
    benefits: [
      "Brightens skin tone.",
      "Glycerin moisturizes.",
      "Gentle daily use."
    ]
  },
  {
    id: "shampoo",
    title: "DIY Organic Shampoo",
    short: "Herbal reetha-amla hair cleanser.",
    img: "images/diy-shampoo.jpg",
    video: "cqXqgu4rMn0",
    ingredients: [
      "Soap Nut (Reetha)",
      "Aloe Vera Gel",
      "Amla",
      "Hibiscus Leaves",
      "Fenugreek Seeds",
      "Water"
    ],
    steps: [
      "Add all ingredients to pan, cover with water.",
      "Boil 20 min on low flame.",
      "Cool & strain into bottle.",
      "Refrigerate up to 2 weeks."
    ],
    benefits: [
      "Cleans scalp naturally.",
      "Strengthens roots.",
      "Reduces dandruff.",
      "Promotes growth."
    ]
  },
  {
    id: "lipbalm",
    title: "DIY Lip Balm",
    short: "Moisturizing rose & ghee balm with natural tint.",
    img: "images/diy-lipbalm.jpg",
    video: "XzYuxX7bGks",
    ingredients: [
      "Rose Petals",
      "Ghee / Clarified Butter"
    ],
    steps: [
      "Clean & dry petals, grind fine.",
      "Mix with ghee using double boiler.",
      "Strain & pour in jar.",
      "Chill to set."
    ],
    benefits: [
      "Deep moisturization.",
      "Natural pink tint.",
      "Heals chapped lips."
    ]
  },
  {
    id: "sunscreen",
    title: "DIY Sunscreen",
    short: "Simple aloe + coconut oil skin protector.",
    img: "images/diy-sunscreen.jpg",
    video: "pdTNbwKCWk",
    ingredients: [
      "Aloe Vera Gel",
      "Coconut Oil"
    ],
    steps: [
      "Mix equal parts gel & oil.",
      "Whisk to creamy texture.",
      "Store in jar.",
      "Apply before sun exposure."
    ],
    benefits: [
      "Soothes skin.",
      "Moisturizes.",
      "Mild natural SPF."
    ]
  },
  {
    id: "moisturizer",
    title: "DIY Moisturizer",
    short: "Beet glow, aloe hydration, oil nourishment.",
    img: "images/diy-moisturizer.jpg",
    video: "Yk24YSrRWKM",
    ingredients: [
      "2 tbsp Beetroot Juice",
      "1 tbsp Aloe Vera Gel",
      "½ tsp Preferred Oil (almond/coconut/jojoba)"
    ],
    steps: [
      "Combine all in clean bowl.",
      "Mix smooth; jar & refrigerate.",
      "Apply as daily moisturizer."
    ],
    benefits: [
      "Natural glow tint.",
      "Hydrates & soothes.",
      "Nourishes skin barrier."
    ]
  },
  {
    id: "facescrub",
    title: "DIY Face Scrub",
    short: "Gentle sugar-honey exfoliator.",
    img: "images/diy-facescrub.jpg",
    video: "2YCbAlv9m0s",
    ingredients: [
      "2 tbsp Sugar",
      "1 tbsp Honey",
      "½ tbsp Coconut Oil",
      "½ tbsp Lemon Juice (optional)",
      "1 tsp Aloe Vera Gel"
    ],
    steps: [
      "Mix all ingredients.",
      "Apply on damp face.",
      "Massage 2–3 min.",
      "Rinse & pat dry."
    ],
    benefits: [
      "Removes dead skin.",
      "Moisturizes.",
      "Brightens tone.",
      "Soothes skin."
    ]
  },
  {
    id: "bodylotion",
    title: "DIY Body Lotion",
    short: "Aloe, rose & glycerin hydration blend.",
    img: "images/diy-bodylotion.jpg",
    video: "I8M8JGxHBP8",
    ingredients: [
      "2 tsp Aloe Vera Gel",
      "2 tsp Rose Water",
      "½ tsp Glycerin",
      "2–3 drops Lemon Juice",
      "1 tsp Coconut Oil"
    ],
    steps: [
      "Mix all in bowl.",
      "Jar & refrigerate.",
      "Apply daily after bath."
    ],
    benefits: [
      "Hydrates & tones.",
      "Locks moisture.",
      "Nourishes skin."
    ]
  },
  {
    id: "hairoil",
    title: "DIY Hair Oil",
    short: "Castor, amla & methi scalp tonic.",
    img: "images/diy-hairoil.jpg",
    video: "cVZ-DJuIs_M",
    ingredients: [
      "½ cup Castor Oil",
      "1 tbsp Amla Powder",
      "1 tbsp Fenugreek Powder"
    ],
    steps: [
      "Double boiler: warm oil + powders 20–30 min.",
      "Strain into jar.",
      "Massage scalp; leave 30 min+; wash."
    ],
    benefits: [
      "Boosts growth.",
      "Strengthens roots.",
      "Reduces dandruff & fall."
    ]
  }
];

/* ===========================
   DATA: DIY FOOD
   =========================== */
const DIY_FOOD = [
  {
    id: "peanutbutter",
    title: "DIY Peanut Butter",
    short: "Roasted peanuts + dates. No sugar, no junk.",
    img: "images/diy-peanutbutter.jpg",
    video: "LDoDEHbiFR0",
    ingredients: [
      "2 cups Roasted Peanuts",
      "4–5 Dates"
    ],
    steps: [
      "Roast peanuts; cool.",
      "Blend till creamy, scraping sides.",
      "Add dates; blend smooth.",
      "Jar airtight; refrigerate."
    ],
    benefits: [
      "High protein & healthy fats.",
      "Naturally sweetened.",
      "No preservatives."
    ]
  },
  {
    id: "fruitjam",
    title: "DIY Fruit Jam",
    short: "Papaya, apple, banana & more fruit power.",
    img: "images/diy-fruitjam.jpg",
    video: "jz_Q8zc8Lo4",
    ingredients: [
      "Papaya", "Apple", "Banana", "Ginger", "Kiwi",
      "Grapes", "Homemade Mishri", "Lemon Juice"
    ],
    steps: [
      "Chop fruits & ginger; boil till soft.",
      "Cool & grind paste.",
      "Add mishri; boil to thicken.",
      "Add lemon; cool; jar & chill."
    ],
    benefits: [
      "Vitamin rich.",
      "No artificial pectin.",
      "No refined sugar."
    ]
  },
  {
    id: "granola",
    title: "DIY Granola",
    short: "Oats + nuts + seeds baked crunchy.",
    img: "images/diy-granola.jpg",
    video: "gy5GwveJfKM",
    ingredients: [
      "Oats","Almonds","Cashews","Pumpkin Seeds","Flax Seeds",
      "Walnuts","Pistachios","Cranberries","Blueberries",
      "Raisins","Cocoa Powder (opt)","Honey","Coconut Oil"
    ],
    steps: [
      "Mix oats, nuts, seeds, dry fruits.",
      "Add honey & coconut oil; coat.",
      "Bake 150°C 15–20 min; stir once.",
      "Cool & jar."
    ],
    benefits: [
      "Energy rich.",
      "Great snack or breakfast.",
      "Less sugar than store packs."
    ]
  },
  {
    id: "muesli",
    title: "DIY Muesli",
    short: "Seed-loaded, jaggery-sweet breakfast mix.",
    img: "images/diy-muesli.jpg",
    video: "O5nRp11PLqk",
    ingredients: [
      "Rolled Oats (2c)",
      "Pumpkin Seeds (¼c)",
      "Flax Seeds (¼c)",
      "Chia Seeds (3 tbsp)",
      "Sunflower Seeds (¼c)",
      "Chopped Almonds (1c)",
      "Wheat Flakes (½c)",
      "Black Raisins (¼c)",
      "Dried Cranberries (¼c)",
      "Cinnamon (¼ tsp)",
      "Jaggery Powder (2 tsp)"
    ],
    steps: [
      "Dry roast first group on low flame.",
      "Cool completely.",
      "Add remaining ingredients; mix.",
      "Store airtight."
    ],
    benefits: [
      "Protein & fiber.",
      "Mineral rich.",
      "No refined sugar cereals."
    ]
  },
  {
    id: "almondmilk",
    title: "DIY Almond Milk",
    short: "2‑ingredient dairy alternative.",
    img: "images/diy-almondmilk.jpg",
    video: "wBf61BkTTTo",
    ingredients: [
      "1 cup Raw Almonds",
      "2 cups Water (blend)",
      "Soaking Water"
    ],
    steps: [
      "Soak almonds 8 hrs; drain.",
      "Blend with 2c fresh water.",
      "Strain thru cloth/bag.",
      "Chill; use 3–4 days."
    ],
    benefits: [
      "Lactose free.",
      "Custom flavor add‑ins.",
      "Cleaner than store cartons."
    ]
  },
  {
    id: "detoxwater",
    title: "DIY Detox Water",
    short: "Cucumber, lemon, mint & ginger infusion.",
    img: "images/diy-detoxwater.jpg",
    video: "fIWjrkgcOrY",
    ingredients: [
      "1–2L Water",
      "½ Cucumber (sliced)",
      "1 Lemon (sliced)",
      "Mint Leaves",
      "Ginger (sliced)"
    ],
    steps: [
      "Add all to jar of water.",
      "Infuse 2–4 hrs (or overnight) in fridge.",
      "Sip all day."
    ],
    benefits: [
      "Hydrating.",
      "Refreshing detox.",
      "Mild digestion support."
    ]
  },
  {
    id: "lemonpickle",
    title: "DIY Lemon Pickle",
    short: "Spiced, sun‑cured achar with mustard oil.",
    img: "images/diy-lemonpickle.jpg",
    video: "y4LWacj067s",
    ingredients: [
      "10–12 Lemons",
      "4–5 Green Chilies (opt)",
      "2 tbsp Salt",
      "Saunf, Dhaniya, Jeera, Sarson",
      "Fenugreek, Pepper, Ajwain",
      "1 cup Mustard Oil",
      "Turmeric, Hing"
    ],
    steps: [
      "Dry lemons; chop.",
      "Roast spices; grind coarse.",
      "Mix lemons, chilies, salt, haldi, hing, spice mix.",
      "Smoke & cool mustard oil; pour over.",
      "Jar; sun 7–10 days; shake daily."
    ],
    benefits: [
      "Digestive spices.",
      "No synthetic vinegar.",
      "Traditional probiotic boost."
    ]
  },
  {
    id: "ghee",
    title: "DIY A2 Ghee",
    short: "From cultured A2 milk to pure golden ghee.",
    img: "images/diy-ghee.jpg",
    video: "tIKVIq4pPlY",
    ingredients: [
      "A2 Full Cream Milk",
      "Curd Starter",
      "Time & heat!"
    ],
    steps: [
      "Set curd from boiled cooled milk.",
      "Churn to get butter.",
      "Slow heat butter till clear & aromatic.",
      "Strain; jar pure ghee."
    ],
    benefits: [
      "Traditional A2 nutrition.",
      "Better digestion.",
      "No adulteration."
    ]
  },
  {
    id: "chyawanprash",
    title: "DIY Chyawanprash",
    short: "Ayurvedic amla jam for immunity.",
    img: "images/diy-chyawanprash.jpg",
    video: "oZ1HoRU23KQ",
    ingredients: [
      "500g Amla",
      "½ tsp Turmeric",
      "1 cup Jaggery",
      "½ tsp Pepper",
      "½ tsp Cumin",
      "½ tsp Black Salt",
      "1 tbsp Ghee"
    ],
    steps: [
      "Boil amla; deseed; puree.",
      "Cook puree; add jaggery.",
      "Add spices & salt; cook till thick.",
      "Finish with ghee; cool; jar."
    ],
    benefits: [
      "Boosts immunity.",
      "Rich in vitamin C.",
      "No refined sugar."
    ]
  }
];

/* ===========================
   RENDER CARDS
   =========================== */
function renderCards(list, containerId){
  const wrap = document.getElementById(containerId);
  wrap.innerHTML = list.map(item => `
    <article class="diy-card" data-id="${item.id}" data-type="${containerId}">
      <div class="diy-card-imgwrap">
        <img src="${item.img}" alt="${item.title}">
      </div>
      <div class="diy-card-body">
        <h3 class="diy-card-title">${item.title}</h3>
        <p class="diy-card-short">${item.short}</p>
        <div class="diy-card-actions">
          <button type="button" data-action="view" data-id="${item.id}" data-type="${containerId}">View Recipe</button>
        </div>
      </div>
    </article>
  `).join("");
}
renderCards(DIY_BODYCARE, "bodycareCards");
renderCards(DIY_FOOD, "foodCards");

/* ===========================
   TAB SWITCHING
   =========================== */
const tabBtns = document.querySelectorAll(".diy-tab-btn");
tabBtns.forEach(btn=>{
  btn.addEventListener("click",()=>{
    tabBtns.forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    const tab = btn.dataset.tab;
    document.querySelectorAll(".diy-panel").forEach(p=>p.classList.remove("active"));
    document.getElementById(`tab-${tab}`).classList.add("active");
    document.getElementById("diySearch").value = "";
    filterCards("");
  });
});

/* ===========================
   SEARCH FILTER
   =========================== */
const searchInput = document.getElementById("diySearch");
searchInput.addEventListener("input", e=>{
  filterCards(e.target.value.trim().toLowerCase());
});
function filterCards(q){
  const activePanel = document.querySelector(".diy-panel.active");
  const cards = activePanel.querySelectorAll(".diy-card");
  cards.forEach(card=>{
    const title = card.querySelector(".diy-card-title").textContent.toLowerCase();
    const short = card.querySelector(".diy-card-short").textContent.toLowerCase();
    card.style.display = (title.includes(q) || short.includes(q)) ? "" : "none";
  });
}

/* ===========================
   MODAL LOGIC
   =========================== */
const modal = document.getElementById("diyModal");
const mTitle = document.getElementById("diyModalTitle");
const mShort = document.getElementById("diyModalShort");
const mIngr = document.getElementById("diyModalIngr");
const mSteps = document.getElementById("diyModalSteps");
const mBens = document.getElementById("diyModalBens");
const mVideoWrap = document.getElementById("diyModalVideoWrap");

function openModal(item){
  mTitle.textContent = item.title;
  mShort.textContent = item.short;
  mIngr.innerHTML = item.ingredients.map(i=>`<li>${i}</li>`).join("");
  mSteps.innerHTML = item.steps.map(s=>`<li>${s}</li>`).join("");
  mBens.innerHTML = item.benefits.map(b=>`<li>${b}</li>`).join("");
  if(item.video){
    const src = `https://www.youtube.com/embed/${item.video}?rel=0`;
    mVideoWrap.innerHTML = `<iframe src="${src}" allowfullscreen></iframe>`;
  }else{
    mVideoWrap.innerHTML = "";
  }
  modal.classList.add("show");
  modal.setAttribute("aria-hidden","false");
}
function closeModal(){
  modal.classList.remove("show");
  modal.setAttribute("aria-hidden","true");
  mVideoWrap.innerHTML = ""; // stop video
}

/* Close handlers */
modal.addEventListener("click", e=>{
  if(e.target.dataset.close === "modal" || e.target.classList.contains("diy-modal-close")){
    closeModal();
  }
});
document.addEventListener("keydown", e=>{
  if(e.key === "Escape") closeModal();
});

/* ===========================
   CARD CLICK -> MODAL
   =========================== */
document.addEventListener("click", e=>{
  const btn = e.target.closest("[data-action='view']");
  if(!btn) return;
  const type = btn.dataset.type;
  const id = btn.dataset.id;
  const srcList = (type === "bodycareCards") ? DIY_BODYCARE : DIY_FOOD;
  const item = srcList.find(x=>x.id===id);
  if(item) openModal(item);
});
